# ============================================================================
# Dotfiles Manager Configuration
# ============================================================================
# This file defines the configuration for the dotfiles manager module.
# It will be auto-configured by the installer during installation.
#
# Template Variables:
#   Use {variable_name} to reference other paths defined in the same section.
#   Variables are resolved iteratively, so you can nest references.
# ============================================================================

[manager]
# State database path (auto-configured by installer)
state_db_path = "~/.local/share/dotfiles/state/manager/system.db"

# Enable debug mode
debug = false

# Default icon variant for all categories
icon_variant = "solid"

# Per-category icon variant overrides
[manager.icon_variant_overrides]
# Example: battery-icons = "rounded"

# ============================================================================
# System Attributes (User-configurable)
# ============================================================================
[system]
# Font settings
font_family = "JetBrains Mono"
font_size = 14  # In pixels

# Monitor configuration (auto-detected, can be overridden)
monitors = []  # Empty = auto-detect, or specify: ["DP-1", "HDMI-1"]

# ============================================================================
# Paths (Auto-configured by installer)
# ============================================================================
[paths]
# Installation root (set by installer)
install_root = "~/.local/share/dotfiles"

# Tool paths
wallpaper_orchestrator_path = "{install_root}/tools/wallpaper-orchestrator"
colorscheme_orchestrator_path = "{install_root}/tools/colorscheme-orchestrator"

# Module paths
rofi_config_manager_cli = "{install_root}/.dependencies/modules/rofi-config-manager/.venv/bin/rofi-config-manager"

# Icon paths
status_bar_icons_base_dir = "{install_root}/assets/status-bar-icons"
status_bar_icons_output_dir = "~/.config/eww/status-bar/icons"

# Wlogout paths
wlogout_icons_templates_dir = "{install_root}/dotfiles/wlogout/templates"
wlogout_style_template_path = "{install_root}/dotfiles/wlogout/templates/style.css.tpl"
wlogout_icons_output_dir = "~/.config/wlogout/icons"
wlogout_style_output_path = "~/.config/wlogout/style.css"
wlogout_config_dir = "~/.config/wlogout"

# ============================================================================
# Wallpaper Orchestrator Configuration Overrides
# ============================================================================
[wallpaper_orchestrator]
# Cache database path (auto-configured by installer)
cache_db_path = "~/.local/share/dotfiles/state/wallpaper-orchestrator/cache.db"

# Enable caching
enable_cache = true

# Container rebuild options (user-configurable)
force_rebuild_containers = false
ignore_cache_on_rebuild = false

# ============================================================================
# Hook System Configuration
# ============================================================================
[hooks]
# Enabled hooks
enabled = ["status_bar_icons", "wlogout_icons", "rofi_config"]

# Fail fast: stop execution if a critical hook fails
fail_fast = false

# Execution groups define order and parallelism
# Each group can be serial or parallel
[[hooks.execution_groups]]
# First: Generate all icons and rofi configs in parallel
hooks = ["status_bar_icons", "wlogout_icons", "rofi_config"]
mode = "parallel"

# Individual hook configurations
[hooks.status_bar_icons]
critical = false  # Don't stop if this fails
colorscheme_color_key = "color15"  # Which color from colorscheme to use

[hooks.wlogout_icons]
critical = false  # Don't stop if this fails
colorscheme_color_key = "color15"  # Which color from colorscheme to use

[hooks.rofi_config]
critical = false  # Don't stop if this fails

# ============================================================================
# Validation Settings
# ============================================================================
[validation]
# Validate configurations at startup
validate_on_startup = true

# Validate paths exist
validate_paths = true
