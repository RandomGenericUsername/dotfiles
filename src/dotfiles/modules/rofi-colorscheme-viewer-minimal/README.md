# Rofi Colorscheme Viewer - Minimal

A minimal rofi-based colorscheme viewer that displays the 16 terminal colors in a compact 2x8 grid with a transparent blurred container.

## Features

- **Compact 2x8 Grid Layout**: Displays 16 terminal colors in 2 rows of 8 colors each
- **No Spacing**: Color swatches are touching side-by-side for a clean look
- **Transparent Container**: Blurred semi-transparent background wraps the color grid
- **Click to Copy**: Click any color to copy its hex value to clipboard
- **Minimal Design**: Shows only the essential 16 terminal colors (color0-color15)
- **Fast & Lightweight**: Generates swatches once and caches them

## Installation

```bash
# Install dependencies and create virtual environment
make install

# Clean and reinstall (if needed)
make clean-venv
```

## Usage

### As Rofi Mode

```bash
# Launch directly
rofi -show colors -modi "colors:rofi-colorscheme-viewer-minimal"

# Or use the installed script
rofi -show colors -modi "colors:$HOME/.local/bin/rofi-colorscheme-viewer-minimal"
```

### Standalone

```bash
# Activate virtual environment
source .venv/bin/activate

# Run the viewer
rofi-colorscheme-viewer-minimal
```

### Testing

```bash
# Run test script
./test-minimal-viewer.sh

# Or use make
make test
```

## Configuration

The viewer reads colorscheme data from:
```
~/.cache/colorscheme/colors.json
```

This file should be generated by the `colorscheme-generator` module.

### Settings

Configuration is located at `config/settings.toml`:

```toml
[paths]
colorscheme_file = "~/.cache/colorscheme/colors.json"
temp_dir = "/tmp/rofi-colorscheme-swatches-minimal"

[display]
swatch_size = 40  # pixels

# These are ignored - minimal viewer only shows 16 colors
show_background = true
show_foreground = true
show_cursor = true
```

## Layout

The viewer displays colors in a 2x8 grid:

```
┌─────────────────────────────────┐
│ color0 color1 color2 ... color7 │
│ color8 color9 color10... color15│
└─────────────────────────────────┘
```

- **Window Width**: 340px (8 × 40px swatches + 20px padding)
- **Swatch Size**: 40×40px
- **Spacing**: 0px (swatches touch each other)
- **Container Padding**: 10px
- **Background**: Semi-transparent (#00000030)

## Rofi Theme

The rofi theme is located at:
```
src/dotfiles/config-files/rofi/colorscheme-viewer-minimal.rasi.j2
```

Key theme features:
- Transparent window background
- No borders or spacing between swatches
- Minimal padding around the grid
- Simple selection highlight

## Dependencies

- **Python**: >=3.12
- **colorscheme-generator**: For reading colorscheme data
- **ImageMagick**: For generating color swatches
- **wl-clipboard**: For copying colors to clipboard (Wayland)
- **rofi**: For displaying the menu

## Development

```bash
# Install in development mode
make install

# Clean generated files
make clean

# Rebuild virtual environment
make clean-venv
```

## How It Works

1. **Read Colorscheme**: Loads colors from `~/.cache/colorscheme/colors.json`
2. **Generate Swatches**: Creates 40×40px PNG images for each color using ImageMagick
3. **Cache Swatches**: Stores swatches in `/tmp/rofi-colorscheme-swatches-minimal/`
4. **Display in Rofi**: Shows swatches in a 2×8 grid using rofi's icon mode
5. **Copy on Click**: Copies hex value to clipboard when a color is selected

## Differences from Full Viewer

| Feature | Minimal | Full |
|---------|---------|------|
| Colors Shown | 16 (color0-15) | 19 (bg/fg/cursor + 16) |
| Layout | 2×8 grid | Scrollable list |
| Format Selection | No | Yes (hex/rgb/json) |
| Metadata Display | No | Yes |
| Spacing | None | 2px |
| Container | Transparent blur | Themed background |
| Size | 340×100px | 25% width |

## Troubleshooting

### Colors Not Showing

Check that the colorscheme file exists:
```bash
ls -la ~/.cache/colorscheme/colors.json
cat ~/.cache/colorscheme/colors.json | jq .
```

### Swatches Not Generated

Ensure ImageMagick is installed:
```bash
which convert
convert --version
```

### Clipboard Not Working

Ensure wl-clipboard is installed:
```bash
which wl-copy
wl-copy --version
```

## License

Part of the dotfiles project.
